<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>IELTS Wizard â€” Corporate Luxury</title>

  <!-- MDBootstrap -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.3.0/mdb.min.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.3.0/mdb.min.js" defer></script>

  <!-- Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js" defer></script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --sky:#63aefc;
      --royal:#023e8a;
      --grad: linear-gradient(135deg,var(--sky),var(--royal));
      --panel:#ffffff;
      --muted:#55607a;
    }
    html,body{height:100%;}
    body{
      font-family:'Inter',-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      margin:0;background:#ffffff;color:#0b2540;
      -webkit-font-smoothing:antialiased;
    }

    /* header */
    header{display:flex;align-items:center;justify-content:space-between;padding:18px 28px;border-bottom:4px solid rgba(2,62,138,0.06);}
    .logo{display:flex;align-items:center;gap:12px;}
    .logo-badge{width:56px;height:56px;border-radius:12px;background:var(--grad);display:flex;align-items:center;justify-content:center;color:white;font-weight:800;font-size:14px;box-shadow: 0 12px 40px rgba(2,62,138,0.12);}

    .container{max-width:1200px;margin:26px auto;padding:0 18px;}

    /* main panels */
    .panel{
      background:var(--panel);border-radius:14px;padding:22px;border-left:6px solid rgba(2,62,138,0.08);
      box-shadow: 0 18px 50px rgba(2,30,80,0.06);
    }
    .panel-strong{border-left-color:var(--royal);box-shadow: 0 28px 80px rgba(2,30,80,0.08);}

    .big-title{font-weight:800;color:var(--royal);font-size:1.6rem;margin:0 0 6px;}
    .sub{color:var(--muted);font-size:0.95rem;margin-bottom:12px;}

    .flow-nav{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:14px;}
    .flow-step{padding:10px 14px;border-radius:999px;background:linear-gradient(180deg,#f6fbff,#eef8ff);color:var(--royal);font-weight:700;border:1px solid #e6f0ff;}
    .flow-step.active{background:var(--grad);color:white;box-shadow: 0 14px 36px rgba(2,62,138,0.14);}

    .controls{display:flex;gap:10px;justify-content:flex-end;align-items:center;margin-top:14px;}

    .btn-primary{
      background:var(--grad);color:white;border:none;padding:12px 18px;border-radius:10px;font-weight:800;
      box-shadow: 0 16px 40px rgba(2,62,138,0.12);
    }

    .timer-large{font-weight:900;color:var(--royal);font-size:1.5rem;}

    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;}
    .vocab-card{border-radius:10px;padding:12px;border:1px solid #eef6ff;background:#fff;display:flex;justify-content:space-between;align-items:center;}

    footer{margin-top:26px;padding:18px;text-align:center;color:var(--muted);font-size:0.9rem;}
    @media (max-width:900px){ .grid-3{grid-template-columns:repeat(1,1fr);} header{padding:12px;} .container{padding:0 12px;} }
  </style>
</head>
<body>
  <header>
    <div class="logo">
      <div class="logo-badge">IELTS</div>
      <div>
        <div style="font-weight:800;font-size:1.1rem;color:var(--royal)">IELTS Academy â€” Premium</div>
        <div style="font-size:0.85rem;color:var(--muted)">Corporate Luxury â€” Classroom Edition</div>
      </div>
    </div>
    <div>
      <button id="logoutTop" style="display:none;background:transparent;border:1px solid #eef6ff;padding:8px 12px;border-radius:8px;color:var(--muted);">Logout</button>
    </div>
  </header>

  <div class="container">
    <!-- LOGIN -->
    <div id="loginWrap" class="panel panel-strong" style="max-width:820px;margin:0 auto;">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;">
        <div>
          <div class="big-title">Enter Access Code</div>
          <div class="sub">Masked input â€” enter the passcode to unlock the lesson.</div>
        </div>
        <div style="min-width:320px;display:flex;gap:8px;align-items:center;">
          <input id="pw3" type="password" placeholder="Access code" style="flex:1;padding:12px;border-radius:8px;border:1px solid #e7f2ff;">
          <button id="pwOk" class="btn-primary">Unlock</button>
        </div>
      </div>
      <div id="err3" style="margin-top:12px;color:#d33;display:none;">Invalid code</div>
    </div>

    <!-- WIZARD -->
    <div id="wizardWrap" style="display:none;margin-top:20px;">
      <div class="flow-nav" id="flowNav"></div>

      <div class="panel" id="panelArea">
        <!-- injected -->
      </div>

      <div class="controls">
        <button id="prev3" style="background:#f6fbff;border:1px solid #e6f2ff;padding:10px 14px;border-radius:8px;color:var(--royal);font-weight:700;" disabled>Prev</button>
        <button id="next3" class="btn-primary">Next</button>
      </div>
    </div>
  </div>

  <footer>Â© 2025 IELTS Academy â€” Corporate Training</footer>

<script>
  // state
  const correctPassword = "VII I MMVI";
  let step = 1, total = 7;

  // DOM
  const pw3 = document.getElementById('pw3'), pwOk = document.getElementById('pwOk'), err3 = document.getElementById('err3');
  const loginWrap = document.getElementById('loginWrap'), wizardWrap = document.getElementById('wizardWrap');
  const panelArea = document.getElementById('panelArea'), flowNav = document.getElementById('flowNav');
  const prev3 = document.getElementById('prev3'), next3 = document.getElementById('next3'), logoutTop = document.getElementById('logoutTop');

  // render flow nav
  function renderFlow(){
    flowNav.innerHTML = '';
    for(let i=1;i<=total;i++){
      const el = document.createElement('div');
      el.className = 'flow-step' + (i===step? ' active':'');
      el.textContent = 'Step ' + i;
      el.addEventListener('click', ()=>{ step = i; renderPanel(); });
      flowNav.appendChild(el);
    }
    prev3.disabled = (step===1);
  }

  // login
  pwOk.addEventListener('click', ()=> {
    const v = pw3.value.trim();
    if(v === correctPassword){
      loginWrap.style.display = 'none';
      wizardWrap.style.display = 'block';
      logoutTop.style.display = 'inline-block';
      renderPanel();
      renderFlow();
    } else {
      err3.style.display = 'block';
      setTimeout(()=> err3.style.display = 'none',2200);
    }
  });
  pw3.addEventListener('keydown', (e)=>{ if(e.key==='Enter') pwOk.click(); });

  // content helpers
  function audioHtml(src){ return '<audio controls style="width:100%"><source src="'+src+'" type="audio/mpeg">Your browser does not support audio.</audio>'; }
  function videoHtml(src){ return '<div class="ratio ratio-16x9"><video controls><source src="'+src+'" type="video/mp4"></video></div>'; }

  // timer corporate
  let timerS = 6*60, timerInt=null;
  function fmt(s){ const m = String(Math.floor(s/60)).padStart(2,'0'); const r = String(s%60).padStart(2,'0'); return m+':'+r; }

  function renderPanel(){
    renderFlow();
    let html = '';
    if(step===1){
      html = `<div style="display:flex;gap:18px;flex-wrap:wrap;">
        <div style="flex:1;min-width:320px;">
          <h2 class="big-title">Step 1 â€” Task Overview</h2>
          <div class="sub">Audio & video overview with clear instructions.</div>
          <div style="margin-top:12px;">${audioHtml('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3')}</div>
        </div>
        <div style="flex:1;min-width:320px;">${videoHtml('https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4')}</div>
      </div>`;
    } else if(step===2){
      html = `<h2 class="big-title">Step 2 â€” Brainstorm</h2>
        <div class="sub">Image + task description + 6-minute focus timer</div>
        <div style="display:flex;gap:12px;margin-top:12px;align-items:center;flex-wrap:wrap;">
          <img src="https://images.unsplash.com/photo-1503676260728-1c00da094a0b?auto=format&fit=crop&w=1200&q=80" style="width:48%;border-radius:10px;">
          <div style="flex:1;min-width:260px;">
            <div style="font-weight:800;color:var(--royal);font-size:1.1rem;">Focus Timer</div>
            <div style="margin:8px 0;" class="timer-large" id="timerDisp">${fmt(timerS)}</div>
            <div style="display:flex;gap:8px;">
              <button class="btn-primary" onclick="startTimer3()">Start</button>
              <button style="background:#f1f7ff;border:1px solid #e6f2ff;padding:10px;border-radius:8px;color:var(--royal)" onclick="pauseTimer3()">Pause</button>
              <button style="background:#f1f7ff;border:1px solid #e6f2ff;padding:10px;border-radius:8px;color:var(--royal)" onclick="resetTimer3()">Reset</button>
            </div>
            <textarea id="brainNotes3" rows="6" style="width:100%;margin-top:10px;border-radius:8px;border:1px solid #eef6ff;padding:10px;" placeholder="Brainstorm notes..."></textarea>
          </div>
        </div>`;
    } else if(step===3){
      html = `<h2 class="big-title">Step 3 â€” Key Vocabulary</h2>
        <div class="sub">Add words and play pronunciation in selected accent</div>
        <div style="display:flex;gap:8px;align-items:center;margin-top:12px;">
          <select id="accent3" style="padding:10px;border-radius:8px;border:1px solid #eef6ff;">
            <option value="en-GB">UK</option><option value="en-IN">India</option><option value="en-US">US</option>
          </select>
          <input id="newV3" placeholder="New vocab" style="flex:1;padding:10px;border-radius:8px;border:1px solid #eef6ff;">
          <button class="btn-primary" onclick="addVocab3()">Add</button>
        </div>
        <div style="margin-top:12px;" class="grid-3" id="vocabGrid3"></div>`;
    } else if(step===4){
      html = `<h2 class="big-title">Step 4 â€” Plan: Introduction & Conclusion</h2>
        <div class="sub">Quick sample lines for fast composition</div>
        <div style="display:flex;gap:12px;margin-top:12px;flex-wrap:wrap;">
          <div style="flex:1;min-width:260px" class="panel-strong">
            <strong>Sample Intros</strong>
            <ul style="margin-top:8px;color:var(--muted)">
              <li>Many argue that...</li><li>In recent times...</li><li>This question raises the issue of...</li>
            </ul>
            <button class="btn-primary" onclick="useIntro3()">Insert Intro</button>
          </div>
          <div style="flex:1;min-width:260px" class="panel-strong">
            <strong>Sample Conclusions</strong>
            <ul style="margin-top:8px;color:var(--muted)">
              <li>In conclusion...</li><li>Overall, the evidence suggests...</li><li>Therefore...</li>
            </ul>
            <button class="btn-primary" onclick="useConcl3()">Insert Conclusion</button>
          </div>
        </div>
        <div style="margin-top:12px;"><textarea id="compose3" rows="5" style="width:100%;border-radius:8px;border:1px solid #eef6ff;padding:12px;" placeholder="Compose intro & conclusion..."></textarea></div>`;
    } else if(step===5){
      html = `<h2 class="big-title">Step 5 â€” Body Paragraph 1</h2>
        <div class="sub">Structure MR â†’ SR â†’ EX</div>
        <div style="display:flex;gap:8px;margin-top:12px;flex-wrap:wrap;">
          <input id="mr1_3" placeholder="Main Reason" style="flex:1;padding:10px;border-radius:8px;border:1px solid #eef6ff;">
          <input id="sr1_3" placeholder="Supporting" style="flex:1;padding:10px;border-radius:8px;border:1px solid #eef6ff;">
          <input id="ex1_3" placeholder="Example" style="flex:1;padding:10px;border-radius:8px;border:1px solid #eef6ff;">
        </div>
        <div style="margin-top:10px;display:flex;gap:8px;">
          <button class="btn-primary" onclick="saveP1_3()">Save</button>
          <button style="background:#f1f7ff;border:1px solid #e6f2ff;padding:10px;border-radius:8px;color:var(--royal)" onclick="copyP1_3()">Copy</button>
        </div>
        <div style="margin-top:10px;"><textarea id="preview1_3" rows="3" readonly style="width:100%;border-radius:8px;border:1px solid #eef6ff;padding:10px"></textarea></div>`;
    } else if(step===6){
      html = `<h2 class="big-title">Step 6 â€” Body Paragraph 2</h2>
        <div class="sub">MR â†’ SR â†’ EX</div>
        <div style="display:flex;gap:8px;margin-top:12px;flex-wrap:wrap;">
          <input id="mr2_3" placeholder="Main Reason" style="flex:1;padding:10px;border-radius:8px;border:1px solid #eef6ff;">
          <input id="sr2_3" placeholder="Supporting" style="flex:1;padding:10px;border-radius:8px;border:1px solid #eef6ff;">
          <input id="ex2_3" placeholder="Example" style="flex:1;padding:10px;border-radius:8px;border:1px solid #eef6ff;">
        </div>
        <div style="margin-top:10px;display:flex;gap:8px;">
          <button class="btn-primary" onclick="saveP2_3()">Save</button>
          <button style="background:#f1f7ff;border:1px solid #e6f2ff;padding:10px;border-radius:8px;color:var(--royal)" onclick="copyP2_3()">Copy</button>
        </div>
        <div style="margin-top:10px;"><textarea id="preview2_3" rows="3" readonly style="width:100%;border-radius:8px;border:1px solid #eef6ff;padding:10px"></textarea></div>`;
    } else if(step===7){
      const p1 = localStorage.getItem('p1_corp')||'';
      const p2 = localStorage.getItem('p2_corp')||'';
      html = `<h2 class="big-title">Step 7 â€” Final Review & Completion</h2>
        <div class="sub">Review and complete.</div>
        <textarea id="full3" rows="8" style="width:100%;border-radius:8px;border:1px solid #eef6ff;padding:12px">${(document.getElementById('compose3')?document.getElementById('compose3').value:'') || ''}

${p1}

${p2}</textarea>
        <div style="margin-top:10px;display:flex;gap:8px;">
          <button class="btn-primary" onclick="complete3()">Complete</button>
          <button style="background:#f1f7ff;border:1px solid #e6f2ff;padding:10px;border-radius:8px;color:var(--royal)" onclick="edit3()">Edit</button>
        </div>
        <div id="done3" style="display:none;margin-top:12px;text-align:center;">
          <h3 style="color:var(--royal)">Task Complete âœ…</h3>
          <div style="display:flex;gap:10px;justify-content:center;margin-top:12px;flex-wrap:wrap;">
            <a class="btn-primary" href="quiz.html">Take Quiz</a>
            <a class="btn-primary" href="teacher-report.html">Tutor Report</a>
            <button style="background:#f1f7ff;border:1px solid #e6f2ff;padding:10px;border-radius:8px;color:var(--royal)" onclick="location.reload()">Return Home</button>
          </div>
        </div>`;
    }
    panelArea.innerHTML = html;
    attachCorpHandlers();
  }

  // navigation
  prev3.addEventListener('click', ()=>{ if(step>1){ step--; renderPanel(); }});
  next3.addEventListener('click', ()=>{ if(step<7){ step++; renderPanel(); }});

  // timer corp
  function startTimer3(){ if(timerInt) return; timerInt = setInterval(()=>{ if(timerS<=0){ clearInterval(timerInt); timerInt=null; return; } timerS--; const d = document.getElementById('timerDisp'); if(d) d.textContent = fmt(timerS); if(timerS===0){ try{ new Audio('https://www.soundjay.com/buttons/sounds/beep-07.mp3').play(); }catch(e){} } },1000); }
  function pauseTimer3(){ if(timerInt){ clearInterval(timerInt); timerInt=null; } }
  function resetTimer3(){ pauseTimer3(); timerS = 6*60; const d = document.getElementById('timerDisp'); if(d) d.textContent = fmt(timerS); }

  // vocab corp
  const defaultCorpV = ['coherent','nuance','perspective','advocate','detrimental','substantial','mitigate','prevalent','compelling','anecdote'];
  function loadVocab3(){
    const arr = JSON.parse(localStorage.getItem('ielts_vocab_corp')||JSON.stringify(defaultCorpV));
    const grid = document.getElementById('vocabGrid3');
    if(!grid) return;
    grid.innerHTML = '';
    arr.forEach((w,i)=>{
      const card = document.createElement('div'); card.className = 'vocab-card';
      card.innerHTML = '<div style="font-weight:700;">'+escapeHtml(w)+'</div><div style="display:flex;gap:8px"><button style="background:transparent;border:1px solid #eef6ff;padding:8px;border-radius:8px;color:var(--royal)" onclick="speak3(\''+escapeHtml(w)+'\')">ðŸ”Š</button><button onclick="remove3('+i+')" style="background:#ffdede;border:none;border-radius:8px;padding:6px;color:#b33">âœ–</button></div>';
      grid.appendChild(card);
    });
  }
  function addVocab3(){ const v=document.getElementById('newV3').value.trim(); if(!v) return; const arr=JSON.parse(localStorage.getItem('ielts_vocab_corp')||JSON.stringify(defaultCorpV)); arr.unshift(v); localStorage.setItem('ielts_vocab_corp', JSON.stringify(arr.slice(0,50))); document.getElementById('newV3').value=''; loadVocab3(); }
  function remove3(i){ const arr=JSON.parse(localStorage.getItem('ielts_vocab_corp')||JSON.stringify(defaultCorpV)); arr.splice(i,1); localStorage.setItem('ielts_vocab_corp', JSON.stringify(arr)); loadVocab3(); }
  function speak3(w){
    const lang = document.getElementById('accent3')?document.getElementById('accent3').value:'en-GB';
    if(!('speechSynthesis' in window)){ alert('Speech synthesis not supported'); return; }
    speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(w); u.lang = lang; u.rate = 0.98; const voices = speechSynthesis.getVoices(); const v = voices.find(x=>x.lang && x.lang.toLowerCase().startsWith(u.lang.toLowerCase())); if(v) u.voice=v; speechSynthesis.speak(u);
  }

  // planners corp
  function saveP1_3(){ const mr = document.getElementById('mr1_3')?document.getElementById('mr1_3').value.trim():''; const sr=document.getElementById('sr1_3')?document.getElementById('sr1_3').value.trim():''; const ex=document.getElementById('ex1_3')?document.getElementById('ex1_3').value.trim():''; localStorage.setItem('p1_corp', (mr||sr||ex)?(mr+'. '+sr+'. '+ex):''); const pv=document.getElementById('preview1_3'); if(pv) pv.value = localStorage.getItem('p1_corp'); }
  function copyP1_3(){ const pv=document.getElementById('preview1_3'); if(pv) navigator.clipboard.writeText(pv.value||''); }
  function saveP2_3(){ const mr = document.getElementById('mr2_3')?document.getElementById('mr2_3').value.trim():''; const sr=document.getElementById('sr2_3')?document.getElementById('sr2_3').value.trim():''; const ex=document.getElementById('ex2_3')?document.getElementById('ex2_3').value.trim():''; localStorage.setItem('p2_corp', (mr||sr||ex)?(mr+'. '+sr+'. '+ex):''); const pv=document.getElementById('preview2_3'); if(pv) pv.value = localStorage.getItem('p2_corp'); }
  function copyP2_3(){ const pv=document.getElementById('preview2_3'); if(pv) navigator.clipboard.writeText(pv.value||''); }

  // intro/concl corp
  function useIntro3(){ const t='In recent times, the discussion has focused on...'; const el=document.getElementById('compose3'); if(el) el.value = t + (el.value? '\n\n'+el.value : ''); alert('Intro inserted'); }
  function useConcl3(){ const t='In conclusion, considering the evidence...'; const el=document.getElementById('compose3'); if(el) el.value = (el.value? el.value + '\n\n' : '') + t; alert('Conclusion inserted'); }

  // complete
  function complete3(){ document.getElementById('done3').style.display = 'block'; confetti({ particleCount: 200, spread: 90, origin:{y:0.45} }); }
  function edit3(){ step = 4; renderPanel(); }

  // attach handlers after panel rendered
  function attachCorpHandlers(){ loadVocab3(); const pv1 = document.getElementById('preview1_3'); if(pv1) pv1.value = localStorage.getItem('p1_corp')||''; const pv2 = document.getElementById('preview2_3'); if(pv2) pv2.value = localStorage.getItem('p2_corp')||''; const tdisp = document.getElementById('timerDisp'); if(tdisp) tdisp.textContent = fmt(timerS); }

  // helper
  function escapeHtml(s){ return String(s||'').replace(/[&<"'>]/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'}[m])); }

  // init
  (function init(){
    // allow keyboard navigation
    document.addEventListener('keydown', (e)=>{ if(wizardWrap.style.display!=='none'){ if(e.key==='ArrowLeft') prev3.click(); if(e.key==='ArrowRight') next3.click(); } });
  })();
</script>
</body>
</html>
