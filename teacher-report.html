<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Teacher Analytics</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body class="p-4">
  <div id="login-section" class="text-center">
    <h4>ðŸ”’ Teacher Access</h4>
    <button id="access-btn" class="btn btn-primary mt-3">Enter PIN</button>
  </div>

  <div id="teacher-data" style="display:none;">
    <h3>ðŸ“Š Weekly Analytics</h3>
    <table class="table table-bordered mt-4">
      <thead><tr><th>TASK ID</th><th>CORRECT</th><th>INCORRECT</th><th>MISSED</th><th>COMMONLY MISSED</th></tr></thead>
      <tbody id="data-body"></tbody>
    </table>
  </div>

  <script>
  document.getElementById('access-btn').addEventListener('click', () => {
    const pin = prompt("Enter Teacher PIN:");
    if (pin === "D2025") {
      document.getElementById('login-section').style.display = "none";
      document.getElementById('teacher-data').style.display = "block";
      
      // Fetch data from localStorage instead of using a static sample
      const reports = JSON.parse(localStorage.getItem('quizReports')) || [];

      const tbody = document.getElementById('data-body');
      tbody.innerHTML = ''; // Clear previous data

      if (reports.length > 0) {
        // Display reports in reverse chronological order (newest first)
        reports.slice().reverse().forEach(r => {
          tbody.innerHTML += `<tr><td>${r.id}</td><td>${r.correct}</td><td>${r.incorrect}</td><td>${r.missed}</td><td>${r.common}</td></tr>`;
        });
      } else {
        tbody.innerHTML = '<tr><td colspan="5" class="text-center">No quiz data available yet.</td></tr>';
      }
    } else alert("Invalid PIN.");
  });
  </script>
</body>
</html>